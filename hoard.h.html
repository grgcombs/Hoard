<!DOCTYPE html>  <html> <head>   <title>hoard.h</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               <a href="index.html">hoard.h</a>             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>                            </td>             <td class="code">               <div class="highlight"><pre><span class="cp">#import &lt;vector&gt;</span></pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <p><code>hoard</code> is a safe and convenient wrapper around Cocoa collections. You create
a <code>hoard</code> using the <code>hd</code> macro:</p>

<pre><code>hoard col = hd(@"dogs",@"are",@"the",@"best!");
</code></pre>

<p>It is necessary to use the C preprocessor in order to avoid explicit mention
of the number of items in the collection. The preprocessor can splice the
items into an array, count them, and then send them to our constructor.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="cp">#define hd(...) hoard(hd_IDARRAY(__VA_ARGS__),hd_IDCOUNT(__VA_ARGS__));</span>
<span class="cp">#define hd_IDCOUNT(...) (sizeof(hd_IDARRAY(__VA_ARGS__)) / sizeof(id))</span>
<span class="cp">#define hd_IDARRAY(...) (id []){ __VA_ARGS__ }</span>

<span class="n">template</span> <span class="o">&lt;</span><span class="n">class</span> <span class="n">T</span><span class="o">&gt;</span> <span class="n">T</span> <span class="n">extract</span><span class="p">(</span><span class="k">const</span> <span class="kt">id</span> <span class="o">*</span><span class="n">objects</span><span class="p">,</span> <span class="n">NSUInteger</span> <span class="n">count</span><span class="p">);</span>

<span class="k">struct</span> <span class="n">hoard</span> <span class="p">{</span>
  <span class="n">hoard</span><span class="p">(</span><span class="kt">id</span> <span class="o">*</span><span class="n">input</span><span class="p">,</span><span class="n">NSUInteger</span> <span class="n">size</span><span class="p">)</span> <span class="o">:</span> <span class="n">storage</span><span class="p">(</span><span class="n">input</span><span class="p">),</span> <span class="n">size</span><span class="p">(</span><span class="n">size</span><span class="p">)</span> <span class="p">{};</span>
  </pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <p>The <code>[]</code> operator has been overloaded a few times. The first and presumably
most useful is the one that takes an integer: <code>h[i]</code> will return the <code>i</code>th
term in a <code>hoard</code>. Note that <code>hoard</code>s are not manifested as a Cocoa
collection until you ask them to be; using array subscripts like this will
cause your <code>hoard</code> to be treated as an array.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="kt">id</span> <span class="n">operator</span><span class="p">[](</span><span class="n">NSUInteger</span> <span class="n">i</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>

  <span class="kt">id</span> <span class="n">operator</span><span class="p">[](</span><span class="n">NSRange</span> <span class="n">r</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>
  <span class="n">NSIndexSet</span> <span class="o">*</span><span class="n">operator</span><span class="p">[](</span><span class="kt">id</span> <span class="n">o</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>
  
  <span class="n">operator</span> <span class="kt">id</span> <span class="o">&lt;</span><span class="n">NSFastEnumeration</span><span class="o">&gt;</span> <span class="p">()</span> <span class="k">const</span><span class="p">;</span>
  
  <span class="n">template</span> <span class="o">&lt;</span><span class="n">class</span> <span class="n">T</span><span class="o">&gt;</span> <span class="n">T</span> <span class="n">get</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">extract</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">(</span><span class="n">storage</span><span class="p">,</span><span class="n">size</span><span class="p">);</span>
  <span class="p">}</span>
      
<span class="nl">private:</span>
  <span class="n">NSUInteger</span> <span class="n">size</span><span class="p">;</span>
  <span class="k">const</span> <span class="kt">id</span> <span class="o">*</span><span class="n">storage</span><span class="p">;</span>
<span class="p">};</span>

</pre></div>             </td>           </tr>                </tbody>     </table>   </div>   <a href="http://github.com/jonsterling/"><img style="position: absolute; top: 0; right: 0; border: 0;" src="http://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub" /></a>     </body> </html> 